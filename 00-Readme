# Active Directory Attack & Defense

## Overview
This project demonstrates a realistic enterprise Active Directory attack and defense lifecycle.

The goal was to simulate common AD attack paths, enable enterprise-grade logging, apply defensive hardening controls, and validate improved security posture using telemetry.

---

## Environment

- Domain: corp.local  
- Windows Server 2025 (Domain Controller – DC01)  
- Windows 11 (Domain-joined Workstation – OYE)  

DC01 IP: 192.168.1.214  
OYE IP: 192.168.1.193  

---

## Methodology

1. Enumerate Active Directory configuration
2. Simulate Kerberos service ticket exposure (SPN)
3. Simulate privilege escalation activity
4. Enable advanced audit policies
5. Validate telemetry visibility
6. Apply Kerberos hardening controls
7. Re-test and validate improvements

---

## Attack Simulation

### Kerberos Service Account Exposure
- Created service account: svc_sql  
- Assigned SPN: MSSQLSvc/sql.corp.local:1433  
- Generated Event ID 4769 (TGS request)  

### Privilege Escalation Simulation
- Created temporary user  
- Added to Administrators group (Event ID 4732)  
- Deleted account (Event ID 4726)  

### Authentication Testing
- Event ID 4624 – Logon Type 3 (Network)  
- Event ID 4624 – Logon Type 10 (RDP)  
- Event ID 4688 – Process Creation  

---

## Detection Engineering

Advanced Audit Policy configured to capture:

- Process creation with command line
- Account management events
- Logon and logoff activity
- Kerberos service ticket requests

Validated:
- 4688 contains full command-line logging
- 4769 exposes encryption type
- 4624 differentiates logon types

---

## Hardening Actions

### Kerberos Encryption Hardening
- Disabled RC4
- Enforced AES-only encryption
- Verified TicketEncryptionType = 0x12 (AES256)

### Privilege Review
- Enumerated Domain Admin group membership
- Confirmed no excessive privilege sprawl

---

## Key Findings

- SPN exposure increases Kerberoast attack surface
- Encryption type directly impacts credential theft feasibility
- Logon Type 10 is a high-value detection signal
- Command-line logging significantly improves investigation depth
- Privilege sprawl remains a primary AD risk factor

---

## Validation

Post-hardening validation confirmed:

- AES encryption enforced
- Kerberos telemetry functioning
- Privilege escalation activity logged
- RDP activity properly tracked
- Command-line logging active

---

## Deliverables

- Architecture evidence
- Attack telemetry screenshots
- Hardening validation evidence
- Audit policy configuration proof
